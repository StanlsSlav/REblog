---
import "../../styles/blog_index.scss";
import BaseHead from "../../components/page_sections/BaseHead.astro";
import Header from "../../components/page_sections/Header.astro";
import Footer from "../../components/page_sections/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import BlogCard from "../../components/BlogCard.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => a.data.creationDate.valueOf() - b.data.creationDate.valueOf()
);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>

  <body>
    <Header />

    <main>
      <section>
        <ul>
          {
            posts.map((post) => (
              <li>
                <BlogCard {post} />
              </li>
            ))
          }
        </ul>
      </section>

      <Footer />
    </main>

    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  </body>
</html>
